<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAJARRO X ESTUDIO | Recursos Digitales</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.25/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root { --primary: #0a0a0a; --accent: #3d5afe; --success: #00c853; --radius: 16px; --bg-home: url('https://images.unsplash.com/photo-1550745165-9bc0b252726f?auto=format&fit=crop&q=80&w=1920'); }
        html { scroll-behavior: smooth; }
        * { box-sizing: border-box; font-family: 'Inter', sans-serif; transition: all 0.3s ease; }
        body { background: #fdfdfd; color: var(--primary); margin: 0; padding: 0; min-height: 100vh; }
        .nav-bar { background: rgba(255, 255, 255, 0.98); backdrop-filter: blur(10px); padding: 15px 40px; display: flex; justify-content: space-between; align-items: center; position: fixed; top: 0; width: 100%; z-index: 2000; border-bottom: 1px solid rgba(0,0,0,0.1); }
        .logo { font-weight: 900; font-size: 1.2rem; letter-spacing: 2px; cursor: pointer; text-transform: uppercase; }
        #home { height: 100vh; width: 100%; background: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), var(--bg-home); background-size: cover; background-position: center; display: flex; flex-direction: column; justify-content: center; align-items: center; color: white; text-align: center; padding: 0 20px; }
        .main-container { max-width: 1100px; margin: 0 auto; padding: 100px 20px 60px; }
        .section { display: none; }
        .section.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .sticky-nav { position: sticky; top: 75px; z-index: 1500; background: rgba(253, 253, 253, 0.9); padding: 10px 0; margin-bottom: 20px; backdrop-filter: blur(5px); }
        .btn-back-main { background: #f0f0f0; color: var(--primary); border: none; padding: 10px 20px; border-radius: 50px; font-weight: 700; cursor: pointer; font-size: 0.8rem; display: inline-flex; align-items: center; gap: 8px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 30px; }
        .card { background: white; border-radius: var(--radius); padding: 30px; border: 1px solid #eee; box-shadow: 0 10px 30px rgba(0,0,0,0.02); position: relative; display: flex; flex-direction: column; }
        .bundle-specs { background: #f8f9fa; padding: 15px; border-radius: 10px; margin: 15px 0; font-size: 0.85rem; border-left: 4px solid var(--accent); line-height: 1.5; }
        .btn-main { background: var(--accent); color: white; border: none; padding: 18px 35px; border-radius: 50px; font-weight: 700; cursor: pointer; width: 100%; text-transform: uppercase; margin-top: auto; }
        .form-group { margin-bottom: 15px; text-align: left; }
        label { display: block; font-weight: 700; margin-bottom: 8px; font-size: 0.8rem; color: #555; }
        input, select, textarea { width: 100%; padding: 12px; border-radius: 10px; border: 1px solid #ccc; font-size: 0.9rem; }
        .checkbox-group { display: grid; grid-template-columns: 1fr; gap: 8px; background: #fff; padding: 10px; border: 1px solid #eee; border-radius: 10px; }
        .checkbox-item { display: flex; align-items: center; gap: 10px; font-size: 0.85rem; cursor: pointer; }
        .checkbox-item input { width: auto; }
        footer { background: #000; color: white; padding: 60px 20px; text-align: center; }
        .footer-logo-container { display: flex; align-items: center; justify-content: center; gap: 15px; margin-bottom: 20px; }
        .footer-logo-img { width: 50px; height: 50px; border-radius: 8px; object-fit: cover; }
        .social-links { display: flex; justify-content: center; gap: 20px; flex-wrap: wrap; margin-top: 25px; }
        .social-links a { color: var(--accent); text-decoration: none; font-weight: bold; font-size: 0.9rem; }
    </style>
</head>
<body>

<div class="nav-bar">
    <div class="logo" onclick="resetToHome()">NAJARRO X ESTUDIO</div>
    <div style="font-size: 0.7rem; font-weight: 800; color: var(--accent);">V.2026 | PANAMÁ</div>
</div>

<div id="home" class="section active">
    <h1 style="font-size: clamp(2.2rem, 8vw, 4.5rem); margin: 0; font-weight: 900; letter-spacing: -2px;">NAJARRO X ESTUDIO</h1>
    <p style="font-size: 1.2rem; margin: 20px 0 40px; opacity: 0.9; max-width: 700px;">Activos Visuales High-End y Loops Psico-Experimentales</p>
    <div style="display: flex; gap: 15px; flex-wrap: wrap; justify-content: center;">
        <button class="btn-main" style="width:auto" onclick="navigateTo('bundles')">Bundles Listos</button>
        <button onclick="navigateTo('custom')" style="background:transparent; border:2px solid white; color:white; padding:18px 35px; border-radius:50px; cursor:pointer; font-weight:700;">Proyecto a Medida</button>
    </div>
</div>

<div class="main-container">
    <div id="bundles" class="section">
        <div class="sticky-nav"><button class="btn-back-main" onclick="resetToHome()">← VOLVER AL INICIO</button></div>
        <h2 style="margin-bottom: 10px;">Bundles de Loops (Entrega: 24h)</h2>
        <div class="grid">
            <div class="card">
                <h3>STARTER PACK</h3>
                <div class="bundle-specs">• 12 Loops 4K (5s c/u)<br>• Entrega: 24 Horas</div>
                <div class="form-group"><label>Ratio:</label><select id="s-ratio"><option>9:16 (Vertical)</option><option>16:9 (Horizontal)</option><option>1:1</option></select></div>
                <div class="form-group"><label>Estética (Elegir 1):</label><select id="s-style"><option>Sci-Fi Biológico</option><option>Glitch-Core Retro</option><option>Brutalismo Ambiental</option><option>Psicodelia Líquida Metálica</option><option>Viaje Astral</option></select></div>
                <div style="font-size: 2.2rem; font-weight: 900; margin-bottom: 20px;">$60</div>
                <button class="btn-main" onclick="saveBundle('STARTER', 60, 'single', 's-style', 's-ratio', 12, 5, '24 horas')">Seleccionar</button>
            </div>
            <div class="card" style="border: 2px solid var(--accent);">
                <h3>PRO PACK</h3>
                <div class="bundle-specs">• 24 Loops 4K (5s c/u)<br>• Entrega: 24 Horas</div>
                <div class="form-group"><label>Ratio:</label><select id="p-ratio"><option>9:16 (Vertical)</option><option>16:9 (Horizontal)</option><option>1:1</option></select></div>
                <div class="form-group">
                    <label>Estéticas (Máximo 2):</label>
                    <div class="checkbox-group" id="p-styles">
                        <label class="checkbox-item"><input type="checkbox" value="Sci-Fi Biológico"> Sci-Fi Biológico</label>
                        <label class="checkbox-item"><input type="checkbox" value="Glitch-Core Retro"> Glitch-Core Retro</label>
                        <label class="checkbox-item"><input type="checkbox" value="Brutalismo Ambiental"> Brutalismo Ambiental</label>
                        <label class="checkbox-item"><input type="checkbox" value="Psicodelia Líquida Metálica"> Psicodelia Líquida</label>
                        <label class="checkbox-item"><input type="checkbox" value="Viaje Astral"> Viaje Astral</label>
                    </div>
                </div>
                <div style="font-size: 2.2rem; font-weight: 900; margin-bottom: 20px;">$110</div>
                <button class="btn-main" onclick="saveBundle('PRO', 110, 'multi', 'p-styles', 'p-ratio', 24, 5, '24 horas', 2)">Seleccionar</button>
            </div>
            <div class="card">
                <h3>INFINITY PACK</h3>
                <div class="bundle-specs">• 50 Loops 4K (5s c/u)<br>• Entrega: 24 Horas</div>
                <div class="form-group"><label>Ratio:</label><select id="u-ratio"><option>9:16 (Vertical)</option><option>16:9 (Horizontal)</option><option>1:1</option></select></div>
                <div class="form-group">
                    <label>Estéticas (Máximo 3):</label>
                    <div class="checkbox-group" id="u-styles">
                        <label class="checkbox-item"><input type="checkbox" value="Sci-Fi Biológico"> Sci-Fi Biológico</label>
                        <label class="checkbox-item"><input type="checkbox" value="Glitch-Core Retro"> Glitch-Core Retro</label>
                        <label class="checkbox-item"><input type="checkbox" value="Brutalismo Ambiental"> Brutalismo Ambiental</label>
                        <label class="checkbox-item"><input type="checkbox" value="Psicodelia Líquida Metálica"> Psicodelia Líquida</label>
                        <label class="checkbox-item"><input type="checkbox" value="Viaje Astral"> Viaje Astral</label>
                    </div>
                </div>
                <div style="font-size: 2.2rem; font-weight: 900; margin-bottom: 20px;">$210</div>
                <button class="btn-main" onclick="saveBundle('INFINITY', 210, 'multi', 'u-styles', 'u-ratio', 50, 5, '24 horas', 3)">Seleccionar</button>
            </div>
        </div>
    </div>

    <div id="custom" class="section">
        <div class="sticky-nav"><button class="btn-back-main" onclick="resetToHome()">← VOLVER AL INICIO</button></div>
        <div class="card" style="max-width: 600px; margin: 0 auto; text-align: center;">
            <h2>Proyecto a Medida</h2>
            <div class="form-group"><label>Proyecto:</label><input type="text" id="p-name" placeholder="Ej: Visual Set Techno"></div>
            <div class="form-group"><label>Concepto:</label><textarea id="p-prompt" rows="3"></textarea></div>
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                <div class="form-group"><label>Ratio:</label><select id="c-ratio"><option>9:16</option><option>16:9</option><option>1:1</option></select></div>
                <div class="form-group"><label>Segundos:</label><select id="p-duration" onchange="updateCustomTotal()"><option value="15">15s ($75)</option><option value="30">30s ($150)</option><option value="60">60s ($300)</option></select></div>
            </div>
            <div class="form-group"><label>Cantidad:</label><input type="number" id="p-qty" value="1" min="1" oninput="updateCustomTotal()"></div>
            <div style="font-size: 2.5rem; font-weight: 900; margin: 20px 0;">Total: $<span id="p-total">75</span></div>
            <button class="btn-main" onclick="saveCustom()">Continuar</button>
        </div>
    </div>

    <div id="client-data" class="section">
        <div class="sticky-nav"><button class="btn-back-main" id="back-to-source">← REGRESAR</button></div>
        <div class="card" style="max-width: 500px; margin: 0 auto;">
            <h2>Contacto</h2>
            <div class="form-group"><label>Nombre:</label><input type="text" id="c-name"></div>
            <div class="form-group"><label>WhatsApp:</label><input type="text" id="c-phone"></div>
            <div class="form-group"><label>Email:</label><input type="email" id="c-email"></div>
            <button class="btn-main" onclick="finalStep()">Generar Cotización</button>
        </div>
    </div>

    <div id="actions" class="section">
        <div class="card" style="text-align: center; max-width: 500px; margin: 0 auto;">
            <h2 style="color: var(--success);">¡Propuesta Lista!</h2>
            <div id="final-summary" style="margin: 30px 0;"></div>
            <button class="btn-main" onclick="downloadPDF()">Descargar PDF</button>
            <button class="btn-main" style="background:#25D366; margin-top:12px;" onclick="sendWhatsApp()">Confirmar WhatsApp</button>
            <button class="btn-back-main" style="margin-top: 30px; width:100%; justify-content:center;" onclick="resetToHome()">INICIO</button>
        </div>
    </div>
</div>

<footer>
    <div class="footer-logo-container">
        <img src="images/NAJARROX-logoB.png" alt="Logo" class="footer-logo-img">
        <div class="logo">NAJARRO X ESTUDIO</div>
    </div>
    <div class="social-links">
        <a href="https://www.youtube.com/@najarrox" target="_blank">YouTube</a>
        <a href="https://www.tiktok.com/@najarrox" target="_blank">TikTok</a>
        <a href="https://instagram.com/najarrox.exe" target="_blank">Instagram</a>
        <a href="https://linktr.ee/najarrox" target="_blank">Linktree</a>
        <a href="mailto:najarrox@gmail.com">Correo</a>
    </div>
    <p style="margin-top:30px; font-size:0.7rem; opacity:0.5;">&copy; 2026 NAJARRO X ESTUDIO. Orgullo Latino.</p>
</footer>

<script>
    const { jsPDF } = window.jspdf;
    let quoteData = {};

    function navigateTo(id) {
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        const target = document.getElementById(id);
        target.classList.add('active');
        
        // Restauración del Scroll Automático
        const headerOffset = 80;
        const elementPosition = target.getBoundingClientRect().top;
        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
        window.scrollTo({ top: offsetPosition, behavior: 'smooth' });
    }

    function resetToHome() { 
        document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
        document.getElementById('home').classList.add('active');
        window.scrollTo({ top: 0, behavior: 'smooth' });
    }

    function updateCustomTotal() {
        const qty = document.getElementById('p-qty').value || 0;
        const dur = document.getElementById('p-duration').value;
        document.getElementById('p-total').innerText = qty * (parseInt(dur) * 5);
    }

    function saveBundle(nivel, precio, tipo, inputId, ratioId, loops, segs, tiempo, max) {
        let estetica = "";
        if(tipo === 'single') {
            estetica = document.getElementById(inputId).value;
        } else {
            const selected = Array.from(document.querySelectorAll(`#${inputId} input:checked`)).map(i => i.value);
            if(selected.length === 0) { alert("Elige al menos una estética"); return; }
            if(selected.length > max) { alert(`Este pack permite máximo ${max} estéticas`); return; }
            estetica = selected.join(", ");
        }
        quoteData = { 
            service: "BUNDLE LOOPS - " + nivel, subtotal: precio, 
            detail: `Estéticas: ${estetica}\nRatio: ${document.getElementById(ratioId).value}\nFormato: ${loops} Loops de ${segs}s\nEntrega: ${tiempo}`,
            applyDiscount: false 
        };
        document.getElementById('back-to-source').onclick = () => navigateTo('bundles');
        navigateTo('client-data');
    }

    function saveCustom() {
        const qty = document.getElementById('p-qty').value;
        const dur = document.getElementById('p-duration').value;
        quoteData = { 
            service: "PRODUCCIÓN A MEDIDA", subtotal: qty * (parseInt(dur) * 5), 
            detail: `Proyecto: ${document.getElementById('p-name').value}\nConcepto: ${document.getElementById('p-prompt').value}\nRatio: ${document.getElementById('c-ratio').value}\nFormato: ${qty} Loops de ${dur}s\nEntrega: 24-72h`,
            applyDiscount: true 
        };
        document.getElementById('back-to-source').onclick = () => navigateTo('custom');
        navigateTo('client-data');
    }

    function finalStep() {
        quoteData.clientName = document.getElementById('c-name').value;
        quoteData.clientPhone = document.getElementById('c-phone').value;
        quoteData.clientEmail = document.getElementById('c-email').value;
        const disc = quoteData.applyDiscount ? quoteData.subtotal * 0.05 : 0;
        quoteData.total = quoteData.subtotal - disc;
        document.getElementById('final-summary').innerHTML = `<div style="font-size:3rem; font-weight:900; color:var(--accent);">$${quoteData.total.toFixed(2)}</div>`;
        navigateTo('actions');
    }

    function sendWhatsApp() {
        const msg = `*NAJARRO X ESTUDIO* Hola, me interesa: ${quoteData.service} ($${quoteData.total.toFixed(2)}).`;
        window.open(`https://wa.me/50764614851?text=${encodeURIComponent(msg)}`);
    }

    function downloadPDF() {
        const doc = new jsPDF();
        doc.setFillColor(10, 10, 10); doc.rect(0, 0, 210, 40, 'F');
        doc.setTextColor(255, 255, 255); doc.setFontSize(22); doc.setFont("helvetica", "bold"); doc.text("NAJARRO X ESTUDIO", 15, 25);
        doc.setTextColor(0,0,0); doc.setFontSize(10); doc.text(`CLIENTE: ${quoteData.clientName}`, 15, 55);
        doc.text(`FECHA: ${new Date().toLocaleDateString()}`, 160, 55);
        doc.autoTable({ startY: 70, head: [['DESCRIPCIÓN', 'VALOR']], body: [[`${quoteData.service}\n${quoteData.detail}`, `$${quoteData.subtotal.toFixed(2)}`]], theme: 'grid', headStyles: { fillColor: [0,0,0] } });
        
        let finalY = doc.lastAutoTable.finalY + 15;
        doc.setFontSize(14); doc.text(`TOTAL FINAL: $${quoteData.total.toFixed(2)} USD`, 195, finalY, {align:'right'});
        
        // Restauración de Notas Importantes
        finalY += 25;
        doc.setFontSize(9); doc.setFont("helvetica", "bold"); doc.text("NOTAS IMPORTANTES:", 15, finalY);
        doc.setFont("helvetica", "normal");
        const notas = [
            "- Esta cotización es exclusiva para LOOPS visuales (Recursos para Fondos/Eventos).",
            "- El tiempo de entrega inicia tras la confirmación del pago.",
            "- Aceptación mediante WhatsApp o correo electrónico."
        ];
        doc.text(notas, 15, finalY + 7);
        doc.save(`Cotizacion_NX_${quoteData.clientName.replace(/\s+/g, '_')}.pdf`);
    }
</script>
</body>
</html>
